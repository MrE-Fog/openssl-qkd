OPENSSL_INCLUDE=$(HOME)/openssl/include
OPENSSL_LIB=$(HOME)/openssl

CC = gcc
CFLAGS = -Wall -I. -I$(OPENSSL_INCLUDE) -L$(OPENSSL_LIB) -g

all: etsi_qkd_client.so etsi_qkd_server.so

etsi_qkd_client.so: etsi_qkd_client.c etsi_qkd_common.c qkd_api.c 
	$(LINK.c) -shared -o $@ $^ -lcrypto -fPIC

etsi_qkd_server.so: etsi_qkd_server.c etsi_qkd_common.c qkd_api.c 
	$(LINK.c) -shared -o $@ $^ -lcrypto -fPIC

clean:
	rm -f etsi_qkd_client.so etsi_qkd_server.so *.o core
	rm -rf *.dSYM

.PHONY: all clean



OPENSSL_INCLUDE=$(HOME)/openssl/include
OPENSSL_LIB=$(HOME)/openssl

CC = gcc
CFLAGS = -Wall -I. -I$(OPENSSL_INCLUDE) -L$(OPENSSL_LIB) -g

all: example.so test_example_engine

example.so: example_engine.c
	$(LINK.c) -shared -o $@ $< -lcrypto -fPIC

test_example_engine: test_example_engine.c example.so
	$(CC) -o $@ $< $(CFLAGS) -lcrypto example.so

clean:
	rm -f example.so test_example_engine *.o core
	rm -rf *.dSYM

.PHONY: all clean
